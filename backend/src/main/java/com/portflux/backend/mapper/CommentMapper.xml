<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.portflux.backend.mapper.CommentMapper">

    <select id="findCommentsByPostId" parameterType="int" resultType="com.portflux.backend.beans.CommentDto">
        SELECT
            c.comment_id AS commentId,
            c.user_num AS userNum,
            u.user_nickname AS userNickname,
            u.user_image AS userImage,
            c.comment_content AS commentContent,
            c.comment_created_at AS commentCreatedAt
        FROM
            POST_COMMENT c
        JOIN
            USERS u ON c.user_num = u.user_num
        WHERE
            c.post_id = #{postId}
        ORDER BY
            c.comment_created_at ASC
    </select>

</mapper>
