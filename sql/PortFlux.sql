-- 기존 테이블 삭제 (있을 경우)
DROP TABLE USERS CASCADE CONSTRAINTS;
DROP TABLE COMPANY CASCADE CONSTRAINTS;
DROP TABLE POST CASCADE CONSTRAINTS;
DROP TABLE POST_COMMENT CASCADE CONSTRAINTS;
DROP TABLE POST_SAVE CASCADE CONSTRAINTS;
DROP TABLE FOLLOWS CASCADE CONSTRAINTS;
DROP TABLE DIRECT_CHAT_ROOMS CASCADE CONSTRAINTS;
DROP TABLE CHAT_MESSAGES CASCADE CONSTRAINTS;
DROP TABLE CHAT_MESSAGE_FILES CASCADE CONSTRAINTS;
DROP TABLE CART CASCADE CONSTRAINTS;
DROP TABLE PAY CASCADE CONSTRAINTS;
DROP TABLE POST_LIKE CASCADE CONSTRAINTS;
DROP TABLE COMMENT_LIKE CASCADE CONSTRAINTS;


------------------------------------------------------------
-- 1) USERS
------------------------------------------------------------
CREATE TABLE USERS (
    user_num NUMBER(20) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_id VARCHAR2(50) NOT NULL,
    user_password VARCHAR2(100) NOT NULL,
    user_name VARCHAR2(100) NOT NULL,
    user_phone VARCHAR2(20),
    user_email VARCHAR2(255) NOT NULL,
    user_nickname VARCHAR2(100) NOT NULL,
    drawn_user CHAR(1) DEFAULT 'N',
    user_create_at DATE DEFAULT SYSDATE NOT NULL,
    user_level NUMBER(2),
    user_image BLOB,
    user_banner BLOB
);

------------------------------------------------------------
-- 2) COMPANY
------------------------------------------------------------
CREATE TABLE COMPANY (
    company_num NUMBER(20) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    company_id VARCHAR2(50) NOT NULL,
    company_password VARCHAR2(100) NOT NULL,
    company_name VARCHAR2(100) NOT NULL,
    company_phone VARCHAR2(20) NOT NULL,
    company_email VARCHAR2(255) NOT NULL,
    drawn_company CHAR(1) DEFAULT 'N',
    company_create_at DATE DEFAULT SYSDATE,
    company_image BLOB,
    company_banner BLOB,
    business_number VARCHAR2(20) NOT NULL
);

------------------------------------------------------------
-- 3) POST
------------------------------------------------------------
CREATE TABLE POST (
    post_id NUMBER(20) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,

    board_type VARCHAR2(10) NOT NULL,
    CONSTRAINT ck_post_board_type CHECK (board_type IN ('lookup', 'job', 'free')),

    -- 작성 주체
    user_num NUMBER(20),
    company_num NUMBER(20),

    -- 공통 필드
    title VARCHAR2(255) NOT NULL,
    content VARCHAR2(4000) NOT NULL,
    created_at DATE DEFAULT SYSDATE NOT NULL,
    updated_at DATE DEFAULT SYSDATE NOT NULL,
    view_cnt NUMBER DEFAULT 0,

    -- lookup 전용
    price NUMBER(10),
    ai_summary VARCHAR2(500),
    download_cnt NUMBER DEFAULT 0,
    post_file VARCHAR2(255),

    -- CHECK 제약
    CONSTRAINT ck_lookup_user CHECK (
        (board_type = 'lookup' AND price IS NOT NULL AND ai_summary IS NOT NULL AND download_cnt IS NOT NULL AND post_file IS NOT NULL)
        OR board_type IN ('job', 'free')
    ),

    CONSTRAINT ck_job_company CHECK (
        (board_type = 'job' AND company_num IS NOT NULL)
        OR board_type IN ('lookup', 'free')
    ),

    CONSTRAINT ck_free_user CHECK (
        ((board_type = 'free' OR board_type = 'lookup') AND user_num IS NOT NULL)
        OR board_type = 'job'
    )
);

------------------------------------------------------------
-- POST updated_at 자동 업데이트 트리거
------------------------------------------------------------
CREATE OR REPLACE TRIGGER trg_post_update
BEFORE UPDATE ON POST
FOR EACH ROW
BEGIN
    :NEW.updated_at := SYSDATE;
END;
/

------------------------------------------------------------
-- POST 외래키
------------------------------------------------------------
ALTER TABLE POST ADD CONSTRAINT fk_post_user
    FOREIGN KEY (user_num) REFERENCES USERS(user_num);

ALTER TABLE POST ADD CONSTRAINT fk_post_company
    FOREIGN KEY (company_num) REFERENCES COMPANY(company_num);

------------------------------------------------------------
-- 4) POST_COMMENT
------------------------------------------------------------
CREATE TABLE POST_COMMENT (
    comment_id NUMBER(20) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_num NUMBER(20) NOT NULL,
    post_id NUMBER(20) NOT NULL,
    comment_content VARCHAR2(1000),
    comment_created_at DATE DEFAULT SYSDATE,
    comment_modify_at DATE
);

ALTER TABLE POST_COMMENT ADD CONSTRAINT fk_comment_user
    FOREIGN KEY (user_num) REFERENCES USERS(user_num);

ALTER TABLE POST_COMMENT ADD CONSTRAINT fk_comment_post
    FOREIGN KEY (post_id) REFERENCES POST(post_id);

------------------------------------------------------------
-- 5) POST_SAVE
------------------------------------------------------------
CREATE TABLE POST_SAVE (
    board_save_id NUMBER(20) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    board_save_time DATE DEFAULT SYSDATE NOT NULL,
    user_num NUMBER(20) NOT NULL,
    post_id NUMBER(20) NOT NULL
);

ALTER TABLE POST_SAVE ADD CONSTRAINT fk_save_user
    FOREIGN KEY (user_num) REFERENCES USERS(user_num);

ALTER TABLE POST_SAVE ADD CONSTRAINT fk_save_post
    FOREIGN KEY (post_id) REFERENCES POST(post_id);

------------------------------------------------------------
-- 6) FOLLOWS
------------------------------------------------------------
CREATE TABLE FOLLOWS (
    follow_id NUMBER(20) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    follower_id NUMBER(20) NOT NULL,
    following_id NUMBER(20) NOT NULL,
    created_at DATE DEFAULT SYSDATE NOT NULL
);

ALTER TABLE FOLLOWS ADD CONSTRAINT fk_follows_follower
    FOREIGN KEY (follower_id) REFERENCES USERS(user_num);

ALTER TABLE FOLLOWS ADD CONSTRAINT fk_follows_following
    FOREIGN KEY (following_id) REFERENCES USERS(user_num);

------------------------------------------------------------
-- 7) DIRECT_CHAT_ROOMS
------------------------------------------------------------
CREATE TABLE DIRECT_CHAT_ROOMS (
    room_id NUMBER(20) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user1_num NUMBER(20) NOT NULL,
    user2_num NUMBER(20) NOT NULL,
    created_at DATE DEFAULT SYSDATE NOT NULL,
    last_message_at DATE,
    status VARCHAR2(20) DEFAULT 'ACTIVE' NOT NULL
);

ALTER TABLE DIRECT_CHAT_ROOMS ADD CONSTRAINT fk_chatroom_user1
    FOREIGN KEY (user1_num) REFERENCES USERS(user_num);

ALTER TABLE DIRECT_CHAT_ROOMS ADD CONSTRAINT fk_chatroom_user2
    FOREIGN KEY (user2_num) REFERENCES USERS(user_num);

------------------------------------------------------------
-- 8) CHAT_MESSAGES
------------------------------------------------------------
CREATE TABLE CHAT_MESSAGES (
    message_id NUMBER(20) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    room_id NUMBER(20) NOT NULL,
    user_num NUMBER(20) NOT NULL,
    sender_num NUMBER(20) NOT NULL,
    content VARCHAR2(2000),
    has_file CHAR(1) DEFAULT 'N' NOT NULL,
    sent_at DATE DEFAULT SYSDATE NOT NULL,
    read_yn CHAR(1) DEFAULT 'N' NOT NULL,
    deleted_yn CHAR(1) DEFAULT 'N' NOT NULL
);

ALTER TABLE CHAT_MESSAGES ADD CONSTRAINT fk_message_room
    FOREIGN KEY (room_id) REFERENCES DIRECT_CHAT_ROOMS(room_id);

ALTER TABLE CHAT_MESSAGES ADD CONSTRAINT fk_message_user
    FOREIGN KEY (user_num) REFERENCES USERS(user_num);

ALTER TABLE CHAT_MESSAGES ADD CONSTRAINT fk_message_sender
    FOREIGN KEY (sender_num) REFERENCES USERS(user_num);

------------------------------------------------------------
-- 9) CHAT_MESSAGE_FILES
------------------------------------------------------------
CREATE TABLE CHAT_MESSAGE_FILES (
    file_id NUMBER(20) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    message_id NUMBER(20) NOT NULL,
    file_name VARCHAR2(255) NOT NULL,
    mime_type VARCHAR2(100),
    file_size NUMBER(20),
    file_path VARCHAR2(1000),
    file_data BLOB,
    uploaded_at DATE DEFAULT SYSDATE NOT NULL
);

ALTER TABLE CHAT_MESSAGE_FILES ADD CONSTRAINT fk_file_message
    FOREIGN KEY (message_id) REFERENCES CHAT_MESSAGES(message_id);

------------------------------------------------------------
-- 10) CART
------------------------------------------------------------
CREATE TABLE CART (
    cart_id NUMBER(20) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_num NUMBER(20) NOT NULL,
    post_id NUMBER(20) NOT NULL,
    created_at DATE DEFAULT SYSDATE NOT NULL
);

ALTER TABLE CART ADD CONSTRAINT fk_cart_user
    FOREIGN KEY (user_num) REFERENCES USERS(user_num);

ALTER TABLE CART ADD CONSTRAINT fk_cart_post
    FOREIGN KEY (post_id) REFERENCES POST(post_id);

------------------------------------------------------------
-- 11) PAY
------------------------------------------------------------
CREATE TABLE PAY (
    order_id NUMBER(20) GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_num NUMBER(20) NOT NULL,
    pay_date DATE DEFAULT SYSDATE,
    pay_price NUMBER(20) NOT NULL,
    setle_sttus NUMBER(1) NOT NULL,
    order_name VARCHAR2(200) NOT NULL,
    cart_id NUMBER(20) NOT NULL
);

ALTER TABLE PAY ADD CONSTRAINT fk_pay_user
    FOREIGN KEY (user_num) REFERENCES USERS(user_num);

ALTER TABLE PAY ADD CONSTRAINT fk_pay_cart
    FOREIGN KEY (cart_id) REFERENCES CART(cart_id);

------------------------------------------------------------
-- 12) POST_LIKE (게시글 좋아요)
------------------------------------------------------------
CREATE TABLE POST_LIKE (
    like_id NUMBER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    user_num NUMBER(20) NOT NULL,
    post_id NUMBER(20) NOT NULL,
    liked_at DATE DEFAULT SYSDATE NOT NULL,
    CONSTRAINT uq_post_like UNIQUE (user_num, post_id)
);

-- 외래키
ALTER TABLE POST_LIKE ADD CONSTRAINT fk_postlike_user
    FOREIGN KEY (user_num) REFERENCES USERS(user_num);

ALTER TABLE POST_LIKE ADD CONSTRAINT fk_postlike_post
    FOREIGN KEY (post_id) REFERENCES POST(post_id);

------------------------------------------------------------
-- 13) COMMENT_LIKE (댓글 좋아요)
------------------------------------------------------------
CREATE TABLE COMMENT_LIKE (
    like_id NUMBER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    user_num NUMBER(20) NOT NULL,
    comment_id NUMBER(20) NOT NULL,
    liked_at DATE DEFAULT SYSDATE NOT NULL,
    CONSTRAINT uq_comment_like UNIQUE (user_num, comment_id)
);

-- 외래키
ALTER TABLE COMMENT_LIKE ADD CONSTRAINT fk_commentlike_user
    FOREIGN KEY (user_num) REFERENCES USERS(user_num);

ALTER TABLE COMMENT_LIKE ADD CONSTRAINT fk_commentlike_comment
    FOREIGN KEY (comment_id) REFERENCES POST_COMMENT(comment_id);


-- ============================================================
-- 샘플 데이터 INSERT 스크립트
-- ============================================================

------------------------------------------------------------
-- 1) USERS (2개)
------------------------------------------------------------
INSERT INTO USERS (user_id, user_password, user_name, user_phone, user_email, user_nickname, user_level)
VALUES ('user001', 'password123!', '김철수', '010-1234-5678', 'kimcs@email.com', '철수짱', 1);

INSERT INTO USERS (user_id, user_password, user_name, user_phone, user_email, user_nickname, user_level)
VALUES ('user002', 'password456!', '이영희', '010-9876-5432', 'leeyh@email.com', '영희네', 2);

------------------------------------------------------------
-- 2) COMPANY (2개)
------------------------------------------------------------
INSERT INTO COMPANY (company_id, company_password, company_name, company_phone, company_email, business_number)
VALUES ('company001', 'comp123!', '테크스타트업', '02-1234-5678', 'contact@techstartup.com', '123-45-67890');

INSERT INTO COMPANY (company_id, company_password, company_name, company_phone, company_email, business_number)
VALUES ('company002', 'comp456!', '디자인에이전시', '02-9876-5432', 'hello@designagency.com', '987-65-43210');

------------------------------------------------------------
-- 3) POST (6개 - lookup 2개, job 2개, free 2개)
------------------------------------------------------------
-- lookup 게시글 (user_num 1, 2 사용)
INSERT INTO POST (board_type, user_num, title, content, price, ai_summary, download_cnt, post_file, view_cnt)
VALUES ('lookup', 1, 'Python 머신러닝 완벽 가이드', 'Python으로 머신러닝을 배우는 완벽한 자료입니다. 초보자부터 고급까지 모두 학습 가능합니다.', 
        15000, 'Python 머신러닝 학습 자료로 초보부터 고급까지 단계별 학습 가능', 25, 'python_ml_guide.pdf', 150);

INSERT INTO POST (board_type, user_num, title, content, price, ai_summary, download_cnt, post_file, view_cnt)
VALUES ('lookup', 2, 'React 프로젝트 템플릿 모음', 'React로 만든 다양한 프로젝트 템플릿 10종입니다. 즉시 사용 가능한 코드가 포함되어 있습니다.', 
        20000, 'React 프로젝트 템플릿 10종 모음, 즉시 사용 가능', 40, 'react_templates.zip', 230);

-- job 게시글 (company_num 1, 2 사용)
INSERT INTO POST (board_type, company_num, title, content, view_cnt)
VALUES ('job', 1, '[테크스타트업] 백엔드 개발자 채용', 
        '저희 테크스타트업에서 백엔드 개발자를 모집합니다.
        
주요 업무:
- Spring Boot 기반 API 개발
- AWS 인프라 구축 및 관리
- 데이터베이스 설계 및 최적화

자격 요건:
- Java/Spring 3년 이상 경험
- MySQL, Oracle 등 RDBMS 경험
- 원활한 커뮤니케이션 능력

우대 사항:
- Docker, Kubernetes 경험
- MSA 아키텍처 구축 경험

연봉: 5000만원 ~ 7000만원 (협의 가능)', 320);

INSERT INTO POST (board_type, company_num, title, content, view_cnt)
VALUES ('job', 2, '[디자인에이전시] UI/UX 디자이너 채용', 
        '디자인에이전시에서 UI/UX 디자이너를 채용합니다.

담당 업무:
- 웹/앱 서비스 UI/UX 디자인
- 사용자 리서치 및 분석
- 프로토타입 제작 및 테스트

지원 자격:
- Figma, Adobe XD 능숙
- 포트폴리오 필수 제출
- 2년 이상 실무 경험

복리후생:
- 주 4.5일 근무
- 재택근무 가능
- 4대보험 + 퇴직금

연봉: 4000만원 ~ 5500만원', 180);

-- free 게시글 (user_num 1, 2 사용)
INSERT INTO POST (board_type, user_num, title, content, view_cnt)
VALUES ('free', 1, '오라클 DB 설치 중 에러 해결 방법', 
        '오라클 19c 설치하다가 ORA-12154 에러가 발생했어요.
        
해결 방법 공유합니다:
1. tnsnames.ora 파일 경로 확인
2. 환경변수 TNS_ADMIN 설정
3. 리스너 재시작

이렇게 하니까 해결됐네요! 같은 문제 겪으시는 분들께 도움이 되길 바랍니다.', 85);

INSERT INTO POST (board_type, user_num, title, content, view_cnt)
VALUES ('free', 2, 'Spring Boot 프로젝트 구조 추천해주세요', 
        '처음으로 Spring Boot로 큰 프로젝트를 시작하는데요.
        
패키지 구조를 어떻게 가져가는 게 좋을까요?
- 도메인별로 나눌까요?
- 레이어별로 나눌까요?

경험 많으신 분들의 조언 부탁드립니다!', 120);

------------------------------------------------------------
-- 4) POST_COMMENT (각 게시글에 2개씩 = 12개)
------------------------------------------------------------
-- lookup 게시글 1번에 댓글
INSERT INTO POST_COMMENT (user_num, post_id, comment_content)
VALUES (2, 1, '자료 정말 유익하네요! 다운로드해서 공부하겠습니다.');

INSERT INTO POST_COMMENT (user_num, post_id, comment_content)
VALUES (1, 1, '감사합니다! 많은 도움이 되셨으면 좋겠어요~');

-- lookup 게시글 2번에 댓글
INSERT INTO POST_COMMENT (user_num, post_id, comment_content)
VALUES (1, 2, '템플릿 구조가 깔끔하네요. 바로 적용해봐야겠어요.');

INSERT INTO POST_COMMENT (user_num, post_id, comment_content)
VALUES (2, 2, '고맙습니다! 실제 프로젝트에 사용하시고 피드백 주시면 더 좋아요 ^^');

-- job 게시글 3번에 댓글
INSERT INTO POST_COMMENT (user_num, post_id, comment_content)
VALUES (1, 3, '지원 방법이 어떻게 되나요? 이력서는 어디로 보내면 될까요?');

INSERT INTO POST_COMMENT (user_num, post_id, comment_content)
VALUES (2, 3, '저도 관심 있습니다. MSA 경험은 있는데 지원해볼게요!');

-- job 게시글 4번에 댓글
INSERT INTO POST_COMMENT (user_num, post_id, comment_content)
VALUES (1, 4, '주 4.5일 근무 너무 좋네요! 포트폴리오 준비해서 지원하겠습니다.');

INSERT INTO POST_COMMENT (user_num, post_id, comment_content)
VALUES (2, 4, '재택근무 가능한 게 큰 장점이네요. 면접 일정은 어떻게 되나요?');

-- free 게시글 5번에 댓글
INSERT INTO POST_COMMENT (user_num, post_id, comment_content)
VALUES (2, 5, '저도 똑같은 에러 겪었는데 덕분에 해결했어요! 감사합니다 ㅠㅠ');

INSERT INTO POST_COMMENT (user_num, post_id, comment_content)
VALUES (1, 5, '도움이 되셨다니 다행이네요! 오라클은 에러가 참 많아요 ㅎㅎ');

-- free 게시글 6번에 댓글
INSERT INTO POST_COMMENT (user_num, post_id, comment_content)
VALUES (1, 6, '저는 도메인별로 나누는 걸 추천드려요. 유지보수가 훨씬 편합니다.');

INSERT INTO POST_COMMENT (user_num, post_id, comment_content)
VALUES (2, 6, '좋은 의견 감사합니다! 도메인별 구조로 가닥을 잡아봐야겠어요.');

------------------------------------------------------------
-- 5) POST_SAVE (각 유저가 2개씩 저장 = 4개)
------------------------------------------------------------
INSERT INTO POST_SAVE (user_num, post_id)
VALUES (1, 2);  -- user1이 lookup 게시글 2 저장

INSERT INTO POST_SAVE (user_num, post_id)
VALUES (1, 4);  -- user1이 job 게시글 4 저장

INSERT INTO POST_SAVE (user_num, post_id)
VALUES (2, 1);  -- user2가 lookup 게시글 1 저장

INSERT INTO POST_SAVE (user_num, post_id)
VALUES (2, 3);  -- user2가 job 게시글 3 저장

------------------------------------------------------------
-- 6) FOLLOWS (서로 팔로우 2개)
------------------------------------------------------------
INSERT INTO FOLLOWS (follower_id, following_id)
VALUES (1, 2);  -- user1이 user2를 팔로우

INSERT INTO FOLLOWS (follower_id, following_id)
VALUES (2, 1);  -- user2가 user1을 팔로우

------------------------------------------------------------
-- 7) DIRECT_CHAT_ROOMS (2개)
------------------------------------------------------------
INSERT INTO DIRECT_CHAT_ROOMS (user1_num, user2_num, last_message_at, status)
VALUES (1, 2, SYSDATE - 1, 'ACTIVE');

INSERT INTO DIRECT_CHAT_ROOMS (user1_num, user2_num, last_message_at, status)
VALUES (2, 1, SYSDATE, 'ACTIVE');

------------------------------------------------------------
-- 8) CHAT_MESSAGES (각 채팅방에 2개씩 = 4개)
------------------------------------------------------------
-- 채팅방 1의 메시지
INSERT INTO CHAT_MESSAGES (room_id, user_num, sender_num, content, read_yn)
VALUES (1, 2, 1, '안녕하세요! Python 자료 관련해서 질문이 있는데요.', 'Y');

INSERT INTO CHAT_MESSAGES (room_id, user_num, sender_num, content, read_yn)
VALUES (1, 1, 2, '네 말씀하세요! 무엇이든 답변드릴게요 ^^', 'Y');

-- 채팅방 2의 메시지
INSERT INTO CHAT_MESSAGES (room_id, user_num, sender_num, content, read_yn)
VALUES (2, 1, 2, 'React 템플릿 정말 잘 만드셨네요!', 'Y');

INSERT INTO CHAT_MESSAGES (room_id, user_num, sender_num, content, read_yn)
VALUES (2, 2, 1, '감사합니다! 필요하신 부분 있으면 언제든 연락주세요~', 'N');

------------------------------------------------------------
-- 9) CHAT_MESSAGE_FILES (2개)
------------------------------------------------------------
INSERT INTO CHAT_MESSAGE_FILES (message_id, file_name, mime_type, file_size, file_path)
VALUES (1, 'question_screenshot.png', 'image/png', 245680, '/files/chat/2024/12/question_screenshot.png');

INSERT INTO CHAT_MESSAGE_FILES (message_id, file_name, mime_type, file_size, file_path)
VALUES (3, 'sample_code.txt', 'text/plain', 5120, '/files/chat/2024/12/sample_code.txt');

------------------------------------------------------------
-- 10) CART (각 유저가 2개씩 = 4개)
------------------------------------------------------------
INSERT INTO CART (user_num, post_id)
VALUES (1, 1);  -- user1이 lookup 게시글 1을 장바구니에

INSERT INTO CART (user_num, post_id)
VALUES (1, 2);  -- user1이 lookup 게시글 2를 장바구니에

INSERT INTO CART (user_num, post_id)
VALUES (2, 1);  -- user2가 lookup 게시글 1을 장바구니에

INSERT INTO CART (user_num, post_id)
VALUES (2, 2);  -- user2가 lookup 게시글 2를 장바구니에

------------------------------------------------------------
-- 11) PAY (각 유저가 1건씩 결제 = 2개)
------------------------------------------------------------
INSERT INTO PAY (user_num, pay_price, setle_sttus, order_name, cart_id)
VALUES (1, 15000, 1, 'Python 머신러닝 완벽 가이드', 1);

INSERT INTO PAY (user_num, pay_price, setle_sttus, order_name, cart_id)
VALUES (2, 20000, 1, 'React 프로젝트 템플릿 모음', 3);

------------------------------------------------------------
-- 12) POST_LIKE (각 게시글에 좋아요 2개씩 = 12개)
------------------------------------------------------------
-- 게시글 1에 좋아요
INSERT INTO POST_LIKE (user_num, post_id) VALUES (1, 1);
INSERT INTO POST_LIKE (user_num, post_id) VALUES (2, 1);

-- 게시글 2에 좋아요
INSERT INTO POST_LIKE (user_num, post_id) VALUES (1, 2);
INSERT INTO POST_LIKE (user_num, post_id) VALUES (2, 2);

-- 게시글 3에 좋아요
INSERT INTO POST_LIKE (user_num, post_id) VALUES (1, 3);
INSERT INTO POST_LIKE (user_num, post_id) VALUES (2, 3);

-- 게시글 4에 좋아요
INSERT INTO POST_LIKE (user_num, post_id) VALUES (1, 4);
INSERT INTO POST_LIKE (user_num, post_id) VALUES (2, 4);

-- 게시글 5에 좋아요
INSERT INTO POST_LIKE (user_num, post_id) VALUES (1, 5);
INSERT INTO POST_LIKE (user_num, post_id) VALUES (2, 5);

-- 게시글 6에 좋아요
INSERT INTO POST_LIKE (user_num, post_id) VALUES (1, 6);
INSERT INTO POST_LIKE (user_num, post_id) VALUES (2, 6);

------------------------------------------------------------
-- 13) COMMENT_LIKE (각 댓글에 좋아요 1개씩 = 12개)
------------------------------------------------------------
INSERT INTO COMMENT_LIKE (user_num, comment_id) VALUES (2, 1);
INSERT INTO COMMENT_LIKE (user_num, comment_id) VALUES (1, 2);
INSERT INTO COMMENT_LIKE (user_num, comment_id) VALUES (2, 3);
INSERT INTO COMMENT_LIKE (user_num, comment_id) VALUES (1, 4);
INSERT INTO COMMENT_LIKE (user_num, comment_id) VALUES (2, 5);
INSERT INTO COMMENT_LIKE (user_num, comment_id) VALUES (1, 6);
INSERT INTO COMMENT_LIKE (user_num, comment_id) VALUES (2, 7);
INSERT INTO COMMENT_LIKE (user_num, comment_id) VALUES (1, 8);
INSERT INTO COMMENT_LIKE (user_num, comment_id) VALUES (2, 9);
INSERT INTO COMMENT_LIKE (user_num, comment_id) VALUES (1, 10);
INSERT INTO COMMENT_LIKE (user_num, comment_id) VALUES (2, 11);
INSERT INTO COMMENT_LIKE (user_num, comment_id) VALUES (1, 12);

------------------------------------------------------------
-- COMMIT
------------------------------------------------------------
COMMIT;


------------------------------------------------------------
-- 모든 테이블의 전체 데이터 조회
------------------------------------------------------------

-- 1) USERS 테이블 전체 조회
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT '1. USERS 테이블 전체 데이터' AS INFO FROM DUAL;
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT * FROM USERS ORDER BY user_num;

-- 2) COMPANY 테이블 전체 조회
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT '2. COMPANY 테이블 전체 데이터' AS INFO FROM DUAL;
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT * FROM COMPANY ORDER BY company_num;

-- 3) POST 테이블 전체 조회
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT '3. POST 테이블 전체 데이터' AS INFO FROM DUAL;
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT * FROM POST ORDER BY post_id;

-- 4) POST_COMMENT 테이블 전체 조회
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT '4. POST_COMMENT 테이블 전체 데이터' AS INFO FROM DUAL;
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT * FROM POST_COMMENT ORDER BY comment_id;

-- 5) POST_SAVE 테이블 전체 조회
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT '5. POST_SAVE 테이블 전체 데이터' AS INFO FROM DUAL;
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT * FROM POST_SAVE ORDER BY board_save_id;

-- 6) FOLLOWS 테이블 전체 조회
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT '6. FOLLOWS 테이블 전체 데이터' AS INFO FROM DUAL;
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT * FROM FOLLOWS ORDER BY follow_id;

-- 7) DIRECT_CHAT_ROOMS 테이블 전체 조회
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT '7. DIRECT_CHAT_ROOMS 테이블 전체 데이터' AS INFO FROM DUAL;
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT * FROM DIRECT_CHAT_ROOMS ORDER BY room_id;

-- 8) CHAT_MESSAGES 테이블 전체 조회
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT '8. CHAT_MESSAGES 테이블 전체 데이터' AS INFO FROM DUAL;
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT * FROM CHAT_MESSAGES ORDER BY message_id;

-- 9) CHAT_MESSAGE_FILES 테이블 전체 조회
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT '9. CHAT_MESSAGE_FILES 테이블 전체 데이터' AS INFO FROM DUAL;
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT * FROM CHAT_MESSAGE_FILES ORDER BY file_id;

-- 10) CART 테이블 전체 조회
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT '10. CART 테이블 전체 데이터' AS INFO FROM DUAL;
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT * FROM CART ORDER BY cart_id;

-- 11) PAY 테이블 전체 조회
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT '11. PAY 테이블 전체 데이터' AS INFO FROM DUAL;
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT * FROM PAY ORDER BY order_id;

-- 12) POST_LIKE 테이블 전체 조회
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT '12. POST_LIKE 테이블 전체 데이터' AS INFO FROM DUAL;
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT * FROM POST_LIKE ORDER BY like_id;

-- 13) COMMENT_LIKE 테이블 전체 조회
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT '13. COMMENT_LIKE 테이블 전체 데이터' AS INFO FROM DUAL;
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT * FROM COMMENT_LIKE ORDER BY like_id;

------------------------------------------------------------
-- 요약 통계
------------------------------------------------------------
SELECT '========================================' AS DIVIDER FROM DUAL;
SELECT '전체 테이블 데이터 개수 요약' AS INFO FROM DUAL;
SELECT '========================================' AS DIVIDER FROM DUAL;

SELECT 'USERS' AS 테이블명, COUNT(*) AS 데이터개수 FROM USERS
UNION ALL
SELECT 'COMPANY', COUNT(*) FROM COMPANY
UNION ALL
SELECT 'POST', COUNT(*) FROM POST
UNION ALL
SELECT 'POST_COMMENT', COUNT(*) FROM POST_COMMENT
UNION ALL
SELECT 'POST_SAVE', COUNT(*) FROM POST_SAVE
UNION ALL
SELECT 'FOLLOWS', COUNT(*) FROM FOLLOWS
UNION ALL
SELECT 'DIRECT_CHAT_ROOMS', COUNT(*) FROM DIRECT_CHAT_ROOMS
UNION ALL
SELECT 'CHAT_MESSAGES', COUNT(*) FROM CHAT_MESSAGES
UNION ALL
SELECT 'CHAT_MESSAGE_FILES', COUNT(*) FROM CHAT_MESSAGE_FILES
UNION ALL
SELECT 'CART', COUNT(*) FROM CART
UNION ALL
SELECT 'PAY', COUNT(*) FROM PAY
UNION ALL
SELECT 'POST_LIKE', COUNT(*) FROM POST_LIKE
UNION ALL
SELECT 'COMMENT_LIKE', COUNT(*) FROM COMMENT_LIKE;